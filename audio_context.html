<!doctype html>
<head>
    <title>Web Audio Api - Audio Context</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <style>
        :root {
            --flex-direction: column;
            --line-height: 4em;
        }

        @media(min-width: 250px) {
            :root {
                --flex-direction: row;
                --line-height: 8em;
            }
        }

        h1 {
            text-align: center;
        }

        main {
            outline: thick double;
            background-color: whitesmoke;
        }

        fieldset {
            display: flex;
            border: none;
            background: yellow;
        }

        form > fieldset {
            flex-direction: var(--flex-direction);
        }

        fieldset fieldset {
            background: red;
        }

        fieldset input[type="range"] {
            width: 20vw;
            display: inline-block;
            top: 0.3em;
            position: relative;
        }

        form > fieldset > label {
            background: turquoise;
            line-height: var(--line-height);
        }

        form > header {
            background: yellow;
        }

        [type="checkbox"] {
        }
    </style>
</head>
<body>
    <header>
        <h1>DevPunks Sequencer</h1>
    </header>
    <main>
        <form action=#>
            <header>
                DevPunks Sequencer
      
                
                
                
                <label>
                    BPM
        <input type=range min=10 max=522 value=251>
                </label>
                <label>
                    Play
        <input name="Play" type="checkbox">
                </label>
            </header>
            <fieldset>
                <legend>Sweep</legend>
                <label>
                    Attack
    <input type="range" name="attack" min="0" max="1" value="0.2" step="0.1">
                </label>
                <label>
                    Release
    <input type="range" name="release" min="0" max="1" value="0.5" step="0.1">
                </label>
                <fieldset>
                    <legend hidden>Checkboxes</legend>
                    <label>
                        <input name=pads type="checkbox">
                    </label>
                    <label>
                        <input name=pads type="checkbox">
                    </label>
                    <label>
                        <input name=pads type="checkbox">
                    </label>
                    <label>
                        <input name=pads type="checkbox">
                    </label>
                </fieldset>
            </fieldset>
            <fieldset>
                <legend>Pulse</legend>
                <label>
                    Hz
    <input type="range" name="hertz" min="660" max="1320" value="880" step="1">
                </label>
                <label>
                    LFO
    <input type="range" name="lfo" min="20" max="40" value="30" step="1">
                </label>
                <fieldset>
                    <legend hidden>Checkboxes</legend>
                    <label>
                        <input name=pads type="checkbox">
                    </label>
                    <label>
                        <input name=pads type="checkbox">
                    </label>
                    <label>
                        <input name=pads type="checkbox">
                    </label>
                    <label>
                        <input name=pads type="checkbox">
                    </label>
                </fieldset>
            </fieldset>
            <fieldset>
                <legend>Noise</legend>
                <label>
                    Duration
    <input type="range" name="duration" min="0" max="2" value="1" step="0.1">
                </label>
                <label>
                    Band
    <input type="range" name="band" min="400" max="1200" value="1000" step="5">
                </label>
                <fieldset>
                    <legend hidden>Checkboxes</legend>
                    <label>
                        <input name=pads type="checkbox">
                    </label>
                    <label>
                        <input name=pads type="checkbox">
                    </label>
                    <label>
                        <input name=pads type="checkbox">
                    </label>
                    <label>
                        <input name=pads type="checkbox">
                    </label>
                </fieldset>
            </fieldset>
            <fieldset>
                <legend>DTMF</legend>
                <label>
                    Rate
    <input type="range" name="rate" min="0.1" max="2" value="1" step="0.1">
                </label>
                <fieldset>
                    <legend hidden>Checkboxes</legend>
                    <label>
                        <input name=pads type="checkbox">
                    </label>
                    <label>
                        <input name=pads type="checkbox">
                    </label>
                    <label>
                        <input name=pads type="checkbox">
                    </label>
                    <label>
                        <input name=pads type="checkbox">
                    </label>
                </fieldset>
            </fieldset>
        </form>
    </main>
    <script>
        function initialize() {
            const form = document.querySelector('main > form')
              , fieldsets = form.querySelectorAll('fieldset')

            console.log(fieldsets)

            // https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormElement/submit_event
            form.addEventListener('submit', submit)

            for (let fieldset of fieldsets)
                configure(fieldset)

        }
        // initialize

        function configure(fieldset) {
            const ranges = fieldset.querySelectorAll('[type=range]')
              , checkboxes = fieldset.querySelectorAll('[type=checkbox]')

            for (let range of ranges) {
                // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/input_event
                // https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener
                range.addEventListener('input', listen)
            }

            for (let box of checkboxes) {
                // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/change_event
                // https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener
                box.addEventListener('change', listen)
            }
        }
        // configure

        // ----------------------------------------------------------------------
        // Events - https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events
        // Event Handlers - https://developer.mozilla.org/en-US/docs/Web/Events
        // e(vent) - https://developer.mozilla.org/en-US/docs/Web/API/Event
        // ----------------------------------------------------------------------

        function listen(e) {
            e.preventDefault()
            // https://developer.mozilla.org/en-US/docs/Web/API/Event/preventDefault

            console.log('Event listener for DOM element:', e.target)
        }
        // listen

        // ----------------------------------------------------------------------
        // https://developer.mozilla.org/en-US/docs/Web/API/FormData/FormData
        // https://developer.mozilla.org/en-US/docs/Web/API/FormData
        // ----------------------------------------------------------------------
        function submit(e) {
            e.preventDefault()
            // https://developer.mozilla.org/en-US/docs/Web/API/Event/preventDefault

            const data = new FormData(e.target)
            // triggers formdata event

            console.log('FormData:', data)
        }
        // submit

        // ----------------------------------------------------------------------
        // https://developer.mozilla.org/en-US/docs/Web/API/FormDataEvent
        // https://developer.mozilla.org/en-US/docs/Web/API/FormDataEvent/FormDataEvent
        // ----------------------------------------------------------------------
        function formdata(e) {

            e.preventDefault()
            // https://developer.mozilla.org/en-US/docs/Web/API/Event/preventDefault

            console.log('FormData:', e.formdata)
        }
        // formdata

        initialize()
        // run program
    </script>
</body>
